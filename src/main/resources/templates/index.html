<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="default">

<head>
    <div th:insert="~{default :: head}"></div>
</head>

<body class="w3-light-grey">

<div th:insert="~{default :: top_container}"></div>
<div th:insert="~{default :: #mySidebar}"></div>

<div class="w3-main page-content">
        <div class="table-panel">
            <form action="#" th:action="@{/period}" th:object="${model}" method="post" style="display: contents;">
                <label>Дата с: <input id="report-date-input" type="text" style="height: 15px; width: 150px" th:field="*{dateInput}"></label>
                <label>Дата по: <input id="report-end-date-input" type="text" style="height: 15px; width: 150px" th:field="*{endDateInput}"></label>
                <input type="submit" value="Выполнить" onclick="showMessageBox('Выборка за период')" style="margin-right:50px">
            </form>
            <form id="start-form" action="#" th:action="@{/}" th:object="${model}" method="post" style="display: contents;">
                <input type="submit" value="Авто-старт" onclick="showMessageBox('Авто-старт');">
            </form>
            <button id="auto-stop-btn" onclick="flux.stop(); showMessageBox('Авто-стoп')" style="margin-left: 50px">Авто-стоп</button>
        </div>

        <div class="report-table">
        <table id="reports_table" class="table-striped" style="overflow-x:auto;">
            <thead>
            <tr>
                <th>Время</th>
                <th>Обозначение</th>
                <th>Рецепт</th>
                <th>Щебень 0-5</th>
                <th>Щебень 5-10</th>
                <th>Щебень 10-20</th>
                <th>Щебень 20-40</th>
                <th>Целлюлоза</th>
                <th>Мин доб</th>
                <th>Пыль</th>
                <th>Битум</th>
                <th>Температура</th>
                <th>Перемеш, сек</th>
                <th>Вес, кг</th>
                <th>Вес всего, кг</th>
                <th>Оператор</th>
            </tr>
            </thead>
            <tbody id="reports-body">
            <tr class="result" data-th-each="report : ${reports}">
                <td>[[${report.dateTime}]]</td>
                <td>[[${report.code}]]</td>
                <td>[[${report.rName}]]</td>
                <td>[[${report.rub05}]]</td>
                <td>[[${report.rub510}]]</td>
                <td>[[${report.rub1020}]]</td>
                <td>[[${report.rub2040}]]</td>
                <td>[[${report.cellulose}]]</td>
                <td>[[${report.mineral}]]</td>
                <td>[[${report.dust}]]</td>
                <td>[[${report.bitum}]]</td>
                <td>[[${report.temper}]]</td>
                <td>[[${report.mixTime}]]</td>
                <td>[[${report.weight}]]</td>
                <td>[[${report.allWeight}]]</td>
                <td>[[${report.oper}]]</td>
            </tr>
            </tbody>
        </table>
        </div>

    </div>
</div>

<div th:insert="~{default :: #snackbar}"></div>

<script>
    w3_select(document.getElementById('index_href'))
</script>

<script>
    var months = ['Январь','Февраль','Март','Апрель','Май','Июнь','Июль','Август','Сентябрь','Октябрь','Ноябрь','Декабрь'];
    var days = ['Вс','Пн','Вт','Ср','Чт','Пт','Сб'];

    $( "#report-date-input" ).datepicker({
        dateFormat: 'yy-mm-dd',
        monthNames : months,
        dayNamesMin : days,
    });

    $( "#report-end-date-input" ).datepicker({
        dateFormat: 'yy-mm-dd',
        monthNames : months,
        dayNamesMin : days,
    });

    $('#start-form').submit(function(){
        $.ajax({
            url: $('#start-form').attr('action'),
            type: 'POST',
            data : $('#start-form').serialize(),
            success: function(){
                $('#reports_table tbody').empty();
                flux.start();
            }
        });
        return false;
    });
</script>

</body>

</html>